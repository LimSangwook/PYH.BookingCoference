CREATE TABLE `reservation_info` (
	`RESERVATION_KEY` INT(11) NOT NULL AUTO_INCREMENT COMMENT '예약 키',
	`RESERVATION_PWD` VARCHAR(30) NOT NULL COMMENT '예약 비밀번호',
	`NAME` VARCHAR(20) NOT NULL COMMENT '예약자명',
	`FIRM_NAME` VARCHAR(30) NOT NULL COMMENT '소속(기업명)',
	`PHONE_NUMBER_1` CHAR(4) NOT NULL COMMENT '핸드폰번호1',
	`STATUS` CHAR(1) NOT NULL DEFAULT 'W' COMMENT 'C:취소 W:대기 A:승인',
	`STATUS_TIME` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'STATUS 상태 변경 시간',
	`PHONE_NUMBER_2` CHAR(4) NOT NULL COMMENT '핸드폰번호2',
	`PHONE_NUMBER_3` CHAR(4) NOT NULL COMMENT '핸드폰번호3',
	`EMAIL_ADDR_1` VARCHAR(20) NOT NULL COMMENT '이메일',
	`EMAIL_ADDR_2` VARCHAR(20) NULL DEFAULT NULL,
	`EMAIL_ADDR_3` VARCHAR(20) NULL DEFAULT NULL,
	`REQUEST` VARCHAR(50) NOT NULL COMMENT '요청사항',
	`AGREE_TERM_PERSONAL_INFO` CHAR(1) NOT NULL COMMENT '개인정보 수집 및 이용 동의',
	`TOTAL_PRICE` VARCHAR(7) NOT NULL COMMENT '총가격',
	`EVENT_NAME` VARCHAR(30) NULL DEFAULT NULL,
	PRIMARY KEY (`RESERVATION_KEY`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=18
;

CREATE TABLE `meetingroom_info` (
	`MEETINGROOM_KEY` INT(11) NOT NULL AUTO_INCREMENT,
	`NAME` VARCHAR(50) NOT NULL,
	`TYPE` VARCHAR(30) NULL DEFAULT NULL,
	`SIZE` INT(3) NULL DEFAULT NULL,
	`MAX_CAPACITY` INT(3) NULL DEFAULT NULL,
	`FACILITY` VARCHAR(255) NULL DEFAULT NULL,
	`HOURLY_PRICE` INT(8) NULL DEFAULT NULL,
	`PUBLISH` TINYINT(1) UNSIGNED ZEROFILL NOT NULL DEFAULT '0',
	`ATTACH_CNT` INT(2) NULL DEFAULT '0',
	`REG_DATE` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	`MOD_DATE` DATETIME NULL DEFAULT NULL,
	`DEL_DATE` DATETIME NULL DEFAULT NULL,
	`REG_ID` VARCHAR(100) NOT NULL,
	`MOD_ID` VARCHAR(100) NULL DEFAULT NULL,
	`DEL_ID` VARCHAR(100) NULL DEFAULT NULL,
	`STATUS` CHAR(1) NOT NULL DEFAULT 'Y' COMMENT 'Y: 등록 D:삭제',
	`Color` CHAR(6) NULL DEFAULT NULL,
	PRIMARY KEY (`MEETINGROOM_KEY`)
)
COMMENT='Meeting Room Info\r\nAdded by Karl on 2017.12.13'
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=23
;

CREATE TABLE `meetingroom_file` (
	`FILE_KEY` INT(11) NOT NULL AUTO_INCREMENT COMMENT '파일고유번호',
	`MEETINGROOM_KEY` INT(11) NOT NULL COMMENT '회의실고유번호',
	`ORDER_LEVEL` INT(11) NOT NULL COMMENT '정렬순서',
	`REAL_FILE_NAME` VARCHAR(255) NOT NULL COMMENT '실제파일명',
	`SAVE_FILE_NAME` VARCHAR(255) NOT NULL COMMENT '저장파일명',
	`FILE_PATH` VARCHAR(255) NOT NULL COMMENT '파일경로',
	`FILE_EXT` VARCHAR(30) NOT NULL COMMENT '파일확장자명',
	`FILE_SIZE` INT(11) NOT NULL COMMENT '파일사이즈',
	`FILE_DOWN_CNT` INT(11) NOT NULL COMMENT '파일다운로드수',
	`IMAGE_WIDTH_SIZE` INT(11) NULL DEFAULT NULL COMMENT '이미지가로사이즈',
	`IMAGE_HEIGHT_SIZE` INT(11) NULL DEFAULT NULL COMMENT '이미지세로사이즈',
	`STATUS` VARCHAR(1) NOT NULL COMMENT '상태',
	`REG_DATE` DATETIME NOT NULL COMMENT '등록일시',
	PRIMARY KEY (`FILE_KEY`, `MEETINGROOM_KEY`),
	INDEX `FK_MEETINGROOM_TO_BOARD_FILE` (`MEETINGROOM_KEY`),
	CONSTRAINT `FK_MEETINGROOM_TO_BOARD_FILE` FOREIGN KEY (`MEETINGROOM_KEY`) REFERENCES `meetingroom_info` (`MEETINGROOM_KEY`)
)
COMMENT='미팅룸첨부파일정보'
COLLATE='utf8_general_ci'
ENGINE=InnoDB
AUTO_INCREMENT=357
;


CREATE TABLE `reservation_mapp` (
	`RESERVATION_KEY` INT(11) NOT NULL,
	`MEETINGROOM_KEY` INT(11) NOT NULL,
	`RESERVATION_DATE` DATE NOT NULL,
	`RESERVATION_TIME` CHAR(2) NOT NULL COMMENT '예약시작시간부터 한시간 단위 EX) 08 = 08~09시, 09 = 09~10시, 14 =14~15시',
	`STATUS` CHAR(1) NOT NULL DEFAULT 'W' COMMENT 'C:취소 W:대기 A:승인 (현재사용X)',
	`REG_TIME` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	`MOD_TIME` DATETIME NULL DEFAULT NULL,
	`CANCEL_TIME` DATETIME NULL DEFAULT NULL,
	UNIQUE INDEX `MEETINGROOM_KEY_RESERVATION_DATE_RESERVATION_TIME` (`MEETINGROOM_KEY`, `RESERVATION_DATE`, `RESERVATION_TIME`),
	INDEX `FK1_RESERVATION_KEY` (`RESERVATION_KEY`),
	CONSTRAINT `FK1_RESERVATION_KEY` FOREIGN KEY (`RESERVATION_KEY`) REFERENCES `reservation_info` (`RESERVATION_KEY`),
	CONSTRAINT `FK2_MEETINGROOM_KEY` FOREIGN KEY (`MEETINGROOM_KEY`) REFERENCES `meetingroom_info` (`MEETINGROOM_KEY`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB
;

